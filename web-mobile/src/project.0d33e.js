window.__require=function e(t,a,c){function s(o,r){if(!a[o]){if(!t[o]){var i=o.split("/");if(i=i[i.length-1],!t[i]){var l="function"==typeof __require&&__require;if(!r&&l)return l(i,!0);if(n)return n(i,!0);throw new Error("Cannot find module '"+o+"'")}}var u=a[o]={exports:{}};t[o][0].call(u.exports,function(e){return s(t[o][1][e]||e)},u,u.exports,e,t,a,c)}return a[o].exports}for(var n="function"==typeof __require&&__require,o=0;o<c.length;o++)s(c[o]);return s}({HTTP:[function(e,t,a){"use strict";cc._RF.push(t,"b17edoXxMhIwYsFlds/g45k","HTTP");var c="http://111.229.148.51:1234";cc.Class({extends:cc.Component,statics:{sessionId:0,userId:0,master_url:c,url:c,sendGetRequest:function(e,t){for(var a in e+="?",t)e+=a+"="+t[a]+"&";return e=e.substring(0,e.length-1),new Promise(function(t,a){var s=cc.loader.getXMLHttpRequest(),n=c+e;s.open("GET",n,!0),s.onreadystatechange=function(){if(4===s.readyState&&s.status>=200&&s.status<300){var e=s.responseText;t(e)}else 200!==s.status&&a("===error===")},s.timeout=5e3,s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send()})},sendPostRequest:function(e,t){var a="";for(var s in t)a+=s+"="+t[s]+"&";return a=a.substring(0,a.length-1),new Promise(function(t,s){var n=cc.loader.getXMLHttpRequest(),o=c+e;n.open("POST",o,!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e=n.responseText;t(e)}else 200!==n.status&&s("===error===")},n.timeout=5e3,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(a)})}}});cc._RF.pop()},{}],ItemRankTemplate:[function(e,t,a){"use strict";cc._RF.push(t,"f2ef98KCd9Il5YRR1loHYd8","ItemRankTemplate"),cc.Class({extends:cc.Component,properties:{account:cc.Label,rank:cc.Label,username:cc.Label,battle:cc.Label},init:function(e,t){this.rank.string=e.sort,this.username.string=e.username,this.battle.string=e.battle,e.sort<=3&&(this.rank.node.color=cc.Color.YELLOW,this.username.node.color=cc.Color.YELLOW,this.battle.node.color=cc.Color.YELLOW)},onLoad:function(){},start:function(){},update:function(e){}}),cc._RF.pop()},{}],ItemTemplate:[function(e,t,a){"use strict";cc._RF.push(t,"1760429tGVI+oH2SlhHorqT","ItemTemplate"),cc.Class({extends:cc.Component,properties:{id:0,tradename:cc.Label,tradeclass:cc.Label,tradelevel:cc.Label,weight:cc.Label,uplevel:cc.Button,upclass:cc.Button,selectBox:cc.Toggle,time:cc.Label},init:function(e,t){this.data=e,this.id=e.id,this.tradename.string=e.tradename,this.weight.string=e.weight,this.tradeclass.string=e.tradeclass,this.tradelevel.string=e.tradelevel,this.flag=!1,this.selectBox.isChecked=!1,e.isBusy&&(this.selectBox.interactable=!1,this.selectBox.isChecked=!0,this.selectBox.enableAutoGrayEffect=!0),e.starttime>0&&e.totaltime>0?this.time.string=e.totaltime-parseInt((+new Date-e.starttime)/1e3):this.time.string="",this.uplevel.node.on("click",function(){t({operate:"uplevel",data:e})},this),this.upclass.node.on("click",function(){t({operate:"upclass",data:e})},this)},start:function(){},update:function(e){if(this.data.totaltime>0&&this.data.starttime>0){var t=this.data.totaltime-parseInt((+new Date-this.data.starttime)/1e3);if(t>0&&(this.time.string=parseInt(t/60)+":"+t%60),0===t&&!this.flag){this.flag=!0;var a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));if("trade"===cc.director.getScene().name&&cc.vv.http.sendPostRequest("/finishBusiness",{account:a.account,id:this.data.id,gold:10*+this.data.class+ +this.data.level+10}).then(function(e){cc.director.loadScene("city")}),"gotoWar"===cc.director.getScene().name){parseInt(Math.pow(1.05,+this.data.level-1)*(this.data.basebattle+500*(+this.data.class-1)));var c=(+cc.sys.localStorage.getItem(account+"xianyuancips")||0)+parseInt(+this.data.weight/50);cc.sys.localStorage.setItem(account+"xianyuancips",c),cc.vv.http.sendPostRequest("/finishBattle",{account:account,id:this.data.id,money:this.data.class}).then(function(e){cc.director.loadScene("city")})}}t<0&&(this.time.string="")}}}),cc._RF.pop()},{}],activity:[function(e,t,a){"use strict";cc._RF.push(t,"37160XRqABKrIpYR4nSddqu","activity"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],bag:[function(e,t,a){"use strict";cc._RF.push(t,"729cbT5U+tLlLDycYQMaitW","bag"),cc.Class({extends:cc.Component,properties:{keepclassnum:{type:cc.Label,default:null},strongstonenum:{type:cc.Label,default:null},upclassstone:{type:cc.Label,default:null},editnamecard:{type:cc.Label,default:null},liangshibag:{type:cc.Label,default:null},tiekuangbag:{type:cc.Label,default:null},woodsbag:{type:cc.Label,default:null},caoyaobag:{type:cc.Label,default:null},getxianyuan:{type:cc.Button,default:null},getupclassstone:{type:cc.Button,default:null},getstrongstone:{type:cc.Button,default:null},useeditnamecard:{type:cc.Button,default:null},useliangshibag:{type:cc.Button,default:null},usetiekuangbag:{type:cc.Button,default:null},usewoodsbag:{type:cc.Button,default:null},usecaoyaobag:{type:cc.Button,default:null},newName:{default:null,type:cc.EditBox},newNameBg:{type:cc.Node,default:null}},onLoad:function(){cc.vv.tipsNum=0,this.keepclassnum.string="\uff08"+cc.vv.userData.keepclassnum+"\uff09",this.strongstonenum.string="\uff08"+cc.vv.userData.strongstonenum+"\uff09",this.upclassstone.string="\uff08"+cc.vv.userData.upclassstone+"\uff09",this.editnamecard.string="\uff08"+cc.vv.userData.editnamecard+"\uff09",this.liangshibag.string="\uff08"+cc.vv.userData.liangshibag+"\uff09",this.tiekuangbag.string="\uff08"+cc.vv.userData.tiekuangbag+"\uff09",this.woodsbag.string="\uff08"+cc.vv.userData.woodsbag+"\uff09",this.caoyaobag.string="\uff08"+cc.vv.userData.caoyaobag+"\uff09"},resetName:function(){this.newNameBg.active=!0},changeName:function(){if(cc.vv.userData.editnamecard<=0)cc.vv.message.showMessage("\u6539\u540d\u5361\u6570\u91cf\u4e0d\u8db3",1);else if(this.newName.string){var e=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));cc.vv.http.sendPostRequest("/changeName",{account:e.account,newName:this.newName.string}).then(function(e){200===(e=JSON.parse(e)).code?cc.director.loadScene("city"):cc.vv.message.showMessage("\u4f7f\u7528\u6539\u540d\u5361\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",1)},function(){cc.vv.message.showMessage("\u4f7f\u7528\u6539\u540d\u5361\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",1)})}else cc.vv.message.showMessage("\u8bf7\u8f93\u5165\u65b0\u540d\u5b57",1)},cancel:function(){this.newNameBg.active=!1},getResource:function(e,t){var a=this;if(!a.operateFlag){a.operateFlag=!0;var c=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));cc.vv.http.sendPostRequest("/getResource",{account:c.account,type:t}).then(function(e){200===(e=JSON.parse(e)).code?(cc.vv.message.showMessage("\u83b7\u53d61000\u8d44\u6e90",0),a[t+"bag"].string="\uff08"+(+cc.vv.userData[t+"bag"]-1)+"\uff09"):cc.vv.message.showMessage(e.message,1),a.operateFlag=!1},function(){cc.vv.message.showMessage("\u4f7f\u7528\u8d44\u6e90\u5305\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",1),a.operateFlag=!1})}},start:function(){}}),cc._RF.pop()},{}],battleLevelSelect:[function(e,t,a){"use strict";cc._RF.push(t,"e5314i97z9PTYKYQ0Pxfbl3","battleLevelSelect"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.vv.tipsNum=0},returnBattle:function(e,t){if(parseInt(+cc.vv.userData.level/10+1)<+t)cc.vv.message.showMessage("\u6302\u673a\u526f\u672c\u5883\u754c\u592a\u9ad8\uff0c\u4e0d\u53ef\u9009\u62e9",1);else{cc.vv.userData.currentbattlelevel=+t;var a={account:cc.vv.userData.account,currentbattlelevel:+t};cc.vv.http.sendPostRequest("/updateBattleLevel",a).then(function(e){cc.vv.userData.currentbattlelevel=+t,cc.director.loadScene("battle")},function(){cc.vv.message.showMessage("\u9009\u62e9\u8bd5\u70bc\u4e4b\u5730\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",1)})}},start:function(){}}),cc._RF.pop()},{}],battle:[function(e,t,a){"use strict";cc._RF.push(t,"55858GrzYZD35oZYTRd/JUp","battle"),cc.Class({extends:cc.Component,properties:{BarSelfBlood:{type:cc.Node,default:null},BarSelfSpeed:{type:cc.Node,default:null},BarOtherBlood:{type:cc.Node,default:null},BarOtherSpeed:{type:cc.Node,default:null},battleTop:{type:cc.Node,default:null},battleBottom:{type:cc.Node,default:null},tipsView:{type:cc.ScrollView,default:null},currentBattle:{type:cc.Label,default:null}},onLoad:function(){cc.vv.tipsNum=0,this.showBattleLevel(),this.barSelfBlood=this.BarSelfBlood.getComponent(cc.ProgressBar),this.barSelfSpeed=this.BarSelfSpeed.getComponent(cc.ProgressBar),this.barOtherBlood=this.BarOtherBlood.getComponent(cc.ProgressBar),this.barOtherSpeed=this.BarOtherSpeed.getComponent(cc.ProgressBar),this.selfBloodTotalCount=100,this.selfBloodCurrentCount=100,this.selfSpeedTotalCount=1,this.selfSpeedCurrentCount=1,this.otherBloodTotalCount=100,this.otherBloodCurrentCount=100,this.otherSpeedTotalCount=2,this.otherSpeedCurrentCount=2,this.resetFlag=!1,this.tipFlag=!1,this.tipsView.content.height=50,this.num=0},showBattleLevel:function(){switch(+cc.vv.userData.currentbattlelevel){case 1:this.currentBattle.string="\u51e1\u4eba\u5883";break;case 2:this.currentBattle.string="\u661f\u8fb0\u5883";break;case 3:this.currentBattle.string="\u8d85\u51e1\u5883";break;case 4:this.currentBattle.string="\u795e\u7075\u5883";break;case 5:this.currentBattle.string="\u754c\u795e\u5883";break;case 6:this.currentBattle.string="\u771f\u795e\u5883";break;case 7:this.currentBattle.string="\u865a\u7a7a\u5883";break;case 8:this.currentBattle.string="\u5408\u4e00\u5883";break;case 9:this.currentBattle.string="\u6df7\u6c8c\u5883";break;case 10:this.currentBattle.string="\u6d51\u6e90\u5883";break;case 11:this.currentBattle.string="\u5723\u4eba\u5883";break;case 12:this.currentBattle.string="\u8d85\u5723\u5883";break;case 13:this.currentBattle.string="\u6d51\u6e90\u751f\u547d"}},waitBattle:function(e){var t=new cc.Node;t.addComponent(cc.Label);var a=t.getComponent(cc.Label);a.fontSize=30,this.tipsView.content.insertChild(t,0),this.tipsView.content.height+=t.height,a.string=e},goToSelectBattleLevel:function(){cc.director.loadScene("battleLevelSelect")},update:function(e){var t=this;this.selfSpeedCurrentCount=this.selfSpeedCurrentCount-e,this.otherSpeedCurrentCount=this.otherSpeedCurrentCount-e,this.selfSpeedCurrentCount<=0&&t.battleTop.active&&(this.otherBloodCurrentCount-=30,this.selfSpeedCurrentCount=1),this.otherSpeedCurrentCount<=0&&t.battleTop.active&&(this.selfBloodCurrentCount-=20,this.otherSpeedCurrentCount=2),!this.resetFlag&&(this.selfBloodCurrentCount<=0||this.otherBloodCurrentCount<=0)&&(t.battleTop.active=!1,t.resetFlag=!0,t.scheduleOnce(function(){t.waitBattle("5 \u5bfb\u627e\u602a\u7269\u4e2d......")},1),t.scheduleOnce(function(){t.waitBattle("4 \u5bfb\u627e\u602a\u7269\u4e2d......")},2),t.scheduleOnce(function(){t.waitBattle("3 \u5bfb\u627e\u602a\u7269\u4e2d......")},3),t.scheduleOnce(function(){t.waitBattle("2 \u5bfb\u627e\u602a\u7269\u4e2d......")},4),t.scheduleOnce(function(){t.waitBattle("1 \u5bfb\u627e\u602a\u7269\u4e2d......")},5),t.scheduleOnce(function(){t.selfBloodCurrentCount=100,t.otherBloodCurrentCount=100,t.selfSpeedCurrentCount=1,t.otherSpeedCurrentCount=2,t.battleTop.active=!0,t.battleBottom.active=!0,t.resetFlag=!1,t.waitBattle("\u6218\u6597\u4e2d......")},6)),this.barSelfBlood.progress=this.selfBloodCurrentCount/this.selfBloodTotalCount,this.barOtherBlood.progress=this.otherBloodCurrentCount/this.otherBloodTotalCount,this.barSelfSpeed.progress=this.selfSpeedCurrentCount/this.selfSpeedTotalCount,this.barOtherSpeed.progress=this.otherSpeedCurrentCount/this.otherSpeedTotalCount}}),cc._RF.pop()},{}],bottom2:[function(e,t,a){"use strict";cc._RF.push(t,"aeb58IOAQlCY6xzx+eRSqv8","bottom2"),cc.Class({extends:cc.Component,properties:{},goToOtherScenes:function(e,t){cc.director.loadScene(t)},onLoad:function(){cc.vv.tipsNum=0},start:function(){}}),cc._RF.pop()},{}],cityBottom:[function(e,t,a){"use strict";cc._RF.push(t,"13325EEQjhCV6b48OP0X4Jd","cityBottom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.vv.tipsNum=0},goToOtherScenes:function(e,t){cc.director.getScene().name!==t&&cc.director.loadScene(t)},start:function(){}}),cc._RF.pop()},{}],city:[function(e,t,a){"use strict";cc._RF.push(t,"0d4e6Lu7L9Eh7ebgmNT8ctn","city"),cc.Class({extends:cc.Component,properties:{gold:{type:cc.Label,default:null},gemstone:{type:cc.Label,default:null},username:{type:cc.Label,default:null},level:{type:cc.Label,default:null},progressBar:{type:cc.Node,default:null},progressdata:{type:cc.Label,default:null},tiekuang:{type:cc.Label,default:null},liangshi:{type:cc.Label,default:null},caoyao:{type:cc.Label,default:null},woods:{type:cc.Label,default:null},bottom:{type:cc.Node,default:null},expProgressBar:{type:cc.Node,default:null},expData:{type:cc.Label,default:null}},onLoad:function(){cc.find("bottom").active=!0,cc.game.addPersistRootNode(this.bottom),this.userInfo=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),this.proBar=this.progressBar.getComponent(cc.ProgressBar),this.currentCount=5,this.totalCount=5,this.expProBar=this.expProgressBar.getComponent(cc.ProgressBar),this.getOfflineResource(),this.getBattleAndTransport()},dealResourceNum:function(e){return+e>1e13?parseInt(e/1e13)+"\u4e07\u4ebf":+e>1e8?parseInt(e/1e8)+"\u4ebf":+e>1e6?parseInt(e/1e4)+"\u4e07":e},getOfflineResource:function(){var e=this;e.updateTimes=0,cc.vv.http.sendGetRequest("/getAccount",{account:e.userInfo.account}).then(function(t){var a=(t=JSON.parse(t)).data;a?(e.updateTimes=parseInt((+new Date-a.updatetime)/1e3/5),cc.vv.http.sendGetRequest("/getUserInfo",{account:e.userInfo.account}).then(function(t){var a=(t=JSON.parse(t)).data;e.username.string=a.username,e.gemstone.string=a.gemstone,e.gold.string=a.gold,cc.vv.resourcedata={tiekuang:+a.tiekuang+ +a.tiekuangrate*(e.updateTimes||1),liangshi:+a.liangshi+ +a.liangshirate*(e.updateTimes||1),caoyao:+a.caoyao+ +a.caoyaorate*(e.updateTimes||1),woods:+a.woods+ +a.woodsrate*(e.updateTimes||1),tiekuangrate:+a.tiekuangrate,liangshirate:+a.liangshirate,caoyaorate:+a.caoyaorate,woodsrate:+a.woodsrate,gold:+a.gold};var c=100*Math.pow(1.2,a.currentbattlelevel-1);for(cc.vv.resourcedata.gold=+cc.vv.resourcedata.gold+ +parseInt(Math.pow(1.2,a.currentbattlelevel-1)*(e.updateTimes||1)/10),cc.vv.userData={account:a.account,exp:parseInt(+a.exp+ +a.exprate*(e.updateTimes||1)*c),totalexp:parseInt(+a.totalexp),level:+a.level,currentbattlelevel:a.currentbattlelevel,gemstone:+a.gemstone,keepclassnum:+a.keepclassnum,strongstonenum:+a.strongstonenum,strongstoneclip:+a.strongstoneclip,upclassstone:+a.upclassstone,upclassstoneclip:+a.upclassstoneclip,editnamecard:+a.editnamecard,liangshibag:+a.liangshibag,tiekuangbag:+a.tiekuangbag,woodsbag:+a.woodsbag,caoyaobag:+a.caoyaobag};+cc.vv.userData.exp>=+cc.vv.userData.totalexp;)cc.vv.userData.level=+cc.vv.userData.level+1,cc.vv.userData.exp=parseInt(+cc.vv.userData.exp-+cc.vv.userData.totalexp),cc.vv.userData.totalexp=parseInt(1.2*+cc.vv.userData.totalexp);e.showResource()},function(){cc.vv.message.showMessage("\u83b7\u53d6\u5931\u8d25",1)})):cc.director.loadScene("login")},function(){cc.vv.message.showMessage("\u83b7\u53d6\u5931\u8d25",1)})},showResource:function(){this.expData.string=cc.vv.userData.exp+"/"+cc.vv.userData.totalexp,this.level.string=this.dealLevel(+cc.vv.userData.level);var e=100*Math.pow(1.2,cc.vv.userData.currentbattlelevel-1);cc.vv.userData.exp=cc.vv.userData.exp+e,this.tiekuang.string=this.dealResourceNum(cc.vv.resourcedata.tiekuang),this.liangshi.string=this.dealResourceNum(cc.vv.resourcedata.liangshi),this.caoyao.string=this.dealResourceNum(cc.vv.resourcedata.caoyao),this.woods.string=this.dealResourceNum(cc.vv.resourcedata.woods)},getBattleAndTransport:function(){var e=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));cc.vv.http.sendGetRequest("/battleWarList",{account:e.account}).then(function(t){if(200===(t=JSON.parse(t)).code){var a=t.data;self.battleWarList=a||[];for(var c=0,s=0;s<a.length;++s){if(a[s].isbusy)a[s].totaltime-parseInt((+new Date-a[s].starttime)/1e3)<=0&&(c+=1*+a[s].class,cc.vv.http.sendPostRequest("/finishBattle",{account:e.account,id:a[s].id,money:c}).then(function(e){}))}}else cc.vv.message.showMessage("\u83b7\u53d6\u526f\u672c\u6218\u961f\u5931\u8d25",1)},function(){}),cc.vv.http.sendGetRequest("/getTransportList",{account:e.account}).then(function(t){var a=(t=JSON.parse(t)).data;self.transportList=a||[];for(var c=0,s=0;s<a.length;++s){if(a[s].isbusy)a[s].totaltime-parseInt((+new Date-a[s].starttime)/1e3)<=0&&(c+=10+10*+a[s].class+ +a[s].level,cc.vv.http.sendPostRequest("/finishBusiness",{account:e.account,id:a[s].id,gold:c}).then(function(e){}))}},function(){})},updateResource:function(){var e=cc.vv.resourcedata;e.exp=cc.vv.userData.exp,e.totalexp=cc.vv.userData.totalexp,e.level=cc.vv.userData.level,e.currentbattlelevel=cc.vv.userData.currentbattlelevel,e.account=cc.vv.userData.account,cc.vv.http.sendPostRequest("/updateResource",e).then(function(e){},function(){})},goToOtherScenes:function(e,t){cc.director.loadScene(t)},dealLevel:function(e){var t="";switch(parseInt(e/10)+1){case 1:t="\u51e1\u4eba\u5883";break;case 2:t="\u661f\u8fb0\u5883";break;case 3:t="\u8d85\u51e1\u5883";break;case 4:t="\u795e\u7075\u5883";break;case 5:t="\u754c\u795e\u5883";break;case 6:t="\u771f\u795e\u5883";break;case 7:t="\u865a\u7a7a\u5883";break;case 8:t="\u5408\u4e00\u5883";break;case 9:t="\u6df7\u6c8c\u5883";break;case 10:t="\u6d51\u6e90\u5883";break;case 11:t="\u5723\u4eba\u5883";break;case 12:t="\u8d85\u5723\u5883";break;case 13:t="\u6d51\u6e90\u751f\u547d";break;default:t="\u51e1\u4eba\u5883"}switch(e%10){case 0:t+="\u96f6\u9636";break;case 1:t+="\u4e00\u9636";break;case 2:t+="\u4e8c\u9636";break;case 3:t+="\u4e09\u9636";break;case 4:t+="\u56db\u9636";break;case 5:t+="\u4e94\u9636";break;case 6:t+="\u516d\u9636";break;case 7:t+="\u4e03\u9636";break;case 8:t+="\u516b\u9636";break;case 9:t+="\u4e5d\u9636"}return t},update:function(e){this.currentCount-=e,this.progressdata.string=parseInt(this.currentCount)+1,this.currentCount<=0&&(this.proBar.progress=1,this.currentCount=5,cc.vv.resourcedata.tiekuang=+cc.vv.resourcedata.tiekuang+ +cc.vv.resourcedata.tiekuangrate,cc.vv.resourcedata.caoyao=+cc.vv.resourcedata.caoyao+ +cc.vv.resourcedata.caoyaorate,cc.vv.resourcedata.woods=+cc.vv.resourcedata.woods+ +cc.vv.resourcedata.woodsrate,cc.vv.resourcedata.liangshi=+cc.vv.resourcedata.liangshi+ +cc.vv.resourcedata.liangshirate,this.showResource(),this.updateResource()),this.proBar.progress=this.currentCount/this.totalCount,cc.vv.userData&&(this.expProBar.progress=cc.vv.userData.exp/cc.vv.userData.totalexp)}}),cc._RF.pop()},{}],goTowar:[function(e,t,a){"use strict";cc._RF.push(t,"8a16dIDeLtIT44RP1yzA7Vu","goTowar"),cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,selectWar:{type:cc.Node,default:null}},onLoad:function(){this.reloadWar()},addNewBattle:function(e,t){var a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),c=this;if(t){if(cc.vv.userData.gemstone<1e3)return void cc.vv.message.showMessage("\u94bb\u77f3\u4e0d\u8db3\uff0c\u8bf7\u5145\u503c",1);for(var s=0,n=0;n<this.battleWarList.length;n++)this.battleWarList[n].isbuiedmoney&&s++;if(s>=5)return void cc.vv.message.showMessage("\u94bb\u77f3\u6218\u961f\u5df2\u8fbe\u5230\u6700\u5927\u6218\u961f\u6570\u91cf",1);if(this.operateFlag)return;this.operateFlag=!0,cc.vv.http.sendPostRequest("/addNewBattleWar",{account:a.account,money:!0}).then(function(e){200===e.code?(c.reloadWar(),cc.vv.message.showMessage("\u5f00\u901a\u6218\u961f\u6210\u529f",0)):(cc.vv.message.showMessage(e.message,0),c.operateFlag=!1)},function(){cc.vv.message.showMessage("\u5f00\u901a\u5931\u8d25",0),c.operateFlag=!1})}else{for(var o=0,r=0;r<this.battleWarList.length;r++)this.battleWarList[r].isbuiedmoney||o++;if(parseInt(cc.vv.userData.level/10)+1<=o)return void cc.vv.message.showMessage("\u5f53\u524d\u6218\u961f\u5df2\u8fbe\u5230\u6700\u5927\u6218\u961f\u6570\u91cf",1);if(this.operateFlag)return;this.operateFlag=!0,cc.vv.http.sendPostRequest("/addNewBattleWar",{account:a.account}).then(function(e){200===(e=JSON.parse(e)).code?(c.reloadWar(),cc.vv.message.showMessage("\u5f00\u901a\u6218\u961f\u6210\u529f",0)):(cc.vv.message.showMessage(e.message,0),c.operateFlag=!1)},function(){c.reloadWar(),cc.vv.message.showMessage("\u5f00\u901a\u6218\u961f\u5931\u8d25",1)})}},transBattle:function(){for(var e=this,t=[],a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),c=0;c<e.node.children.length;c++)e.node.children[c].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked&&e.node.children[c].getChildByName("New Toggle").getComponent(cc.Toggle).interactable&&t.push(+e.node.children[c].id);t.length<=0?cc.vv.message.showMessage("\u8bf7\u9009\u62e9\u8981\u6d3e\u9063\u7684\u6218\u961f",1):(this.data={ids:t},t.length>1?cc.vv.message.showMessage("\u4ec5\u53ef\u540c\u65f6\u6d3e\u9063\u4e00\u4e2a\u6218\u961f",1):cc.vv.http.sendPostRequest("/createNewBattle",{account:a.account,ids:t}).then(function(t){e.reloadWar()},function(){}))},selectWarLevel:function(){var e=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),t=this;this.selectWar.active=!1;var a=this.data||{};a.ids&&a.ids.length>0&&cc.vv.http.sendPostRequest("/createNewBattle",{account:e.account,ids:a.ids}).then(function(e){t.reloadWar()},function(){})},reloadWar:function(){var e=this,t=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));this.operateFlag=!1,this.battleWarList=[],cc.vv.http.sendGetRequest("/battleWarList",{account:t.account}).then(function(a){var c=(a=JSON.parse(a)).data;e.battleWarList=c||[];for(var s=e.node.children||[],n=0;n<s.length;n++)s[n].destroy();for(var o=0;o<c.length;++o){var r=cc.instantiate(e.itemPrefab),i=c[o];switch(i.class){case 1:i.classStr="\u9ed1\u94c1";break;case 2:i.classStr="\u9752\u94dc";break;case 3:i.classStr="\u9ec4\u91d1";break;case 4:i.classStr="\u94c2\u91d1";break;case 5:i.classStr="\u9ed1\u91d1";break;case 6:i.classStr="\u94bb\u77f3";break;case 7:i.classStr="\u9ed1\u94bb";break;case 8:i.classStr="\u738b\u8005"}e.node.addChild(r),r.id=i.id,r.getComponent("ItemTemplate").init({id:i.id,tradename:i.name,weight:parseInt(Math.pow(1.05,+i.level-1)*(i.basebattle+500*(+i.class-1))),tradeclass:i.classStr,tradelevel:"lv"+i.level,isBusy:i.isbusy,starttime:+i.starttime,totaltime:+i.totaltime,class:+i.class,level:+i.level,basebattle:i.basebattle},function(a){if("uplevel"===a.operate)if(a.data.level<10){var c=2e3*a.data.level+1e4*Math.pow(2,a.data.class-1);if(cc.vv.resourcedata.tiekuang<c||cc.vv.resourcedata.liangshi<c||cc.vv.resourcedata.caoyao<c||cc.vv.resourcedata.woods<c)return void cc.vv.message.showMessage("\u5347\u7ea7\u6218\u961f\u9700\u8981\u5404\u9879\u8d44\u6e90"+c+",\u8d44\u6e90\u4e0d\u8db3",1);cc.vv.http.sendPostRequest("/battleUplevel",{account:t.account,id:a.data.id,resourceAmount:c}).then(function(t){e.reloadWar()})}else cc.vv.message.showMessage("\u6218\u961f\u7b49\u7ea7\u5df2\u8fbe\u6ee1\u7ea7\uff0c\u8bf7\u5347\u9636\u6218\u961f",1);if("upclass"===a.operate){if(a.data.level<10)return void cc.vv.message.showMessage("\u5347\u9636\u9700\u8981\u7b49\u7ea7\u5347\u523010\u7ea7\u6ee1\u7ea7",1);if(+a.data.class>=8)return void cc.vv.message.showMessage("\u60a8\u5df2\u5347\u5230\u6ee1\u9636",1);var s=0;if(a.data.class>=3&&(s=1e3),cc.vv.userData.gemstone<s)return void cc.vv.message.showMessage("\u5347\u9636\u9700\u8981\u94bb\u77f3"+s+"\uff0c\u8bf7\u5145\u503c",1);cc.vv.http.sendPostRequest("/updateGemstone",{account:t.account,gemstone:+cc.vv.userData.gemstone-s}).then(function(c){cc.vv.userData.gemstone=+cc.vv.userData.gemstone-s,cc.vv.http.sendPostRequest("/battleUpClass",{account:t.account,id:a.data.id}).then(function(t){e.reloadWar()})})}})}},function(){})}}),cc._RF.pop()},{}],initParams:[function(e,t,a){"use strict";cc._RF.push(t,"33e13IqnthBiqGa/2zeKuhs","initParams"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.aa=1,cc.resourcedata={}},start:function(){}}),cc._RF.pop()},{}],loading:[function(e,t,a){"use strict";cc._RF.push(t,"4f482VpCMdOHbs6hhk6VvxG","loading"),cc.Class({extends:cc.Component,properties:{connectTip:{type:cc.Label,default:null}},onLoad:function(){cc.vv={},cc.vv.http=e("HTTP"),cc.vv.message=e("messageTip"),cc.vv.resourcedata={},cc.vv.userInfo={},cc.vv.tipsNum=0;var t=this,a=function(e){cc.loader.loadRes("version/version",function(a,c){a||(e===c.json.version?(t.connectTip.string="\u94fe\u63a5\u6210\u529f",cc.vv.userInfo=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),cc.vv.userInfo&&cc.vv.userInfo.isLogin?cc.director.loadScene("city"):cc.director.loadScene("login")):cc.vv.message.showMessage("\u6709\u65b0\u7248\u672c\u66f4\u65b0\uff0c\u8bf7\u53bbappStore\u4e0b\u8f7d\u65b0\u7248\u672c\u8fdb\u884c\u4f53\u9a8c",1))})},c=function(){t.connectTip.string="\u94fe\u63a5\u5931\u8d25\uff0c5s\u540e\u91cd\u8bd5",setTimeout(s,3e3)},s=function(){cc.vv.http.sendGetRequest("/getVersion").then(function(e){e=JSON.parse(e),a(e.version)},function(){c()})};s()}}),cc._RF.pop()},{HTTP:"HTTP",messageTip:"messageTip"}],loginGame:[function(e,t,a){"use strict";cc._RF.push(t,"d199exM6AxCGLPRq2NnCRp4","loginGame"),cc.Class({extends:cc.Component,properties:{accountTextInfo:{default:null,type:cc.EditBox},passwordTextInfo:{default:null,type:cc.EditBox},errorMessage:{default:null,type:cc.Label}},userLoginIn:function(){var e=this,t=this.accountTextInfo.string,a=this.passwordTextInfo.string;t&&a&&cc.vv.http.sendGetRequest("/loginGame",{account:t,password:a}).then(function(c){200===(c=JSON.parse(c)).code?(cc.vv.userInfo={account:t,password:a,isLogin:!0},cc.sys.localStorage.setItem("jakiiAccountInfo",JSON.stringify(cc.vv.userInfo)),c.data?cc.director.loadScene("welcome"):cc.director.loadScene("city")):(e.errorMessage.string="\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef,\u5982\u679c\u4e3a\u7b2c\u4e00\u6b21\u6ce8\u518c\u8d26\u53f7\uff0c\u5219\u8be5\u8d26\u53f7\u5df2\u7ecf\u88ab\u6ce8\u518c\uff0c\u8bf7\u66f4\u6362\u65b0\u8d26\u53f7\u6ce8\u518c",setTimeout(function(){e.errorMessage.string=""},1e3))},function(){e.errorMessage.string="\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef",setTimeout(function(){e.errorMessage.string=""},1e3)})},onLoad:function(){cc.vv.tipsNum=0,cc.vv.userInfo&&(this.accountTextInfo.string=cc.vv.userInfo.account||"",this.passwordTextInfo.string=cc.vv.userInfo.password||""),cc.find("bottom")&&(cc.find("bottom").active=!1)},start:function(){}}),cc._RF.pop()},{}],market:[function(e,t,a){"use strict";cc._RF.push(t,"1e574sEyrpBE4cwygRSV9S/","market"),cc.Class({extends:cc.Component,properties:{gameMarket:{type:cc.Node,default:null},moneyMarket:{type:cc.Node,default:null}},onLoad:function(){},changeTab:function(e,t){"game"===t&&(this.gameMarket.active=!0,this.moneyMarket.active=!1),"money"===t&&(this.gameMarket.active=!1,this.moneyMarket.active=!0)},buyThingsByCoins:function(e,t){var a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),c=this;c.operateFlag||(c.operateFlag=!0,cc.vv.http.sendPostRequest("/buyThingsByCoins",{type:t,account:a.account}).then(function(e){200===(e=JSON.parse(e)).code?cc.vv.message.showMessage("\u8d2d\u4e70\u6210\u529f",0):cc.vv.message.showMessage(e.message,1),c.operateFlag=!1},function(){cc.vv.message.showMessage("\u8d2d\u4e70\u6210\u529f",1),c.operateFlag=!1}))},buyThingsByMoney:function(e,t){var a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),c=this;c.operateFlag||(c.operateFlag=!0,cc.vv.http.sendPostRequest("/buyThingsByMoney",{type:t,account:a.account}).then(function(e){200===(e=JSON.parse(e)).code?cc.vv.message.showMessage("\u8d2d\u4e70\u6210\u529f",0):cc.vv.message.showMessage(e.message,1),c.operateFlag=!1},function(){cc.vv.message.showMessage("\u8d2d\u4e70\u6210\u529f",1),c.operateFlag=!1}))}}),cc._RF.pop()},{}],messageTip:[function(e,t,a){"use strict";cc._RF.push(t,"29dd6XAzbRBN6ZDAMfHAnmw","messageTip");cc.Class({extends:cc.Component,statics:{showMessage:function(e,t){var a=cc.find("Canvas"),c=new cc.Node;t&&(c.color=cc.Color.RED),c.addComponent(cc.Label);var s=c.getComponent(cc.Label);s.fontSize=40,s.string=e,a.addChild(c,1e3);var n=function e(){c.children&&(c.y=(c.y||0)+10,c.opacity-=5,c.opacity<=0&&s.unschedule(e))};setTimeout(function(){s.schedule(n,.1)},1e3)}}});cc._RF.pop()},{}],progress:[function(e,t,a){"use strict";cc._RF.push(t,"4ac78OiiXdO3IYTa+OvByCi","progress"),cc.Class({extends:cc.Component,properties:{progressBar:{type:cc.Node,default:null},progressdata:{type:cc.Label,default:null},status:{type:cc.Label,default:null},infoNode:{type:cc.Node,default:null}},loadSource:function(){var e=this;this.status.string="\u52a0\u8f7d\u8d44\u6e90\u4e2d...",cc.loader.loadResDir("textures",function(t,a){e.per=t/a},function(){e.finishFlag=!0,e.status.string="\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\uff0c\u5373\u5c06\u5f00\u59cb\u6e38\u620f",e.node.active=!1,e.infoNode.active=!0})},onLoad:function(){this.proBar=this.progressBar.getComponent(cc.ProgressBar),this.per=0,this.loadSource()},update:function(e){this.finishFlag?this.status.string="\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\uff0c\u5373\u5c06\u5f00\u59cb\u6e38\u620f":(this.proBar.progress=this.per,this.progressdata.string=parseInt(100*this.per)+"%")}}),cc._RF.pop()},{}],rank:[function(e,t,a){"use strict";cc._RF.push(t,"f22bfnv8SpOAozGoRrILfRq","rank"),cc.Class({extends:cc.Component,properties:{userItemPrefab:cc.Prefab},onLoad:function(){cc.vv.tipsNum=0,this.getRankList()},getRankList:function(){var e=this,t=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));cc.vv.http.sendGetRequest("/getUserList",{account:t.account}).then(function(t){var a=(t=JSON.parse(t)).data||[];e.userList=a;for(var c=0;c<a.length;++c){var s=cc.instantiate(e.userItemPrefab),n=a[c];n.sort=c+1,e.node.addChild(s),s.getComponent("ItemRankTemplate").init(n)}},function(){})}}),cc._RF.pop()},{}],resource:[function(e,t,a){"use strict";cc._RF.push(t,"9ce14LtPGNIxroq5eMbhHxm","resource"),cc.Class({extends:cc.Component,properties:{content:{type:cc.Node,default:null}},onLoad:function(){this.operateFlag=!1,cc.vv.tipsNum=0,this.getResourceInfo()},getResourceInfo:function(){var e=this,t=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));cc.vv.http.sendGetRequest("/getResourceInfo",{account:t.account}).then(function(t){if(200===(t=JSON.parse(t)).code){var a=t.data||[];e.resourceList=a;for(var c=0;c<a.length;c++){var s=0;s=+a[c].level<=30?parseInt(Math.pow(1.5,+a[c].level-1)):+a[c].level<=50?3e5:5e5,"\u519c\u7530"===a[c].name&&(e.content.children[0].children[3].getComponent("cc.Label").string=+a[c].level,e.content.children[0].children[6].getComponent("cc.Label").string=10*s),"\u94c1\u77ff"===a[c].name&&(e.content.children[1].children[3].getComponent("cc.Label").string=+a[c].level,e.content.children[1].children[6].getComponent("cc.Label").string=10*s),"\u8349\u836f"===a[c].name&&(e.content.children[2].children[3].getComponent("cc.Label").string=+a[c].level,e.content.children[2].children[6].getComponent("cc.Label").string=10*s),"\u6728\u6750"===a[c].name&&(e.content.children[3].children[3].getComponent("cc.Label").string=+a[c].level,e.content.children[3].children[6].getComponent("cc.Label").string=10*s)}}},function(){})},upResourceLevel:function(e,t){var a=this;if(!a.operateFlag){var c=0,s=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));"liangshi"===t&&a.resourceList.forEach(function(e){"\u519c\u7530"===e.name&&(c=e.id)}),"tiekuang"===t&&a.resourceList.forEach(function(e){"\u94c1\u77ff"===e.name&&(c=e.id)}),"woods"===t&&a.resourceList.forEach(function(e){"\u6728\u6750"===e.name&&(c=e.id)}),"caoyao"===t&&a.resourceList.forEach(function(e){"\u8349\u836f"===e.name&&(c=e.id)}),cc.vv.http.sendPostRequest("/upResourceLevel",{account:s.account,id:c,type:t}).then(function(e){200===(e=JSON.parse(e)).code?(cc.vv.message.showMessage("\u5347\u7ea7\u6210\u529f",0),a.getResourceInfo()):cc.vv.message.showMessage(e.message,1),a.operateFlag=!1},function(){cc.vv.message.showMessage("\u5347\u7ea7\u5931\u8d25",1),a.operateFlag=!1})}}}),cc._RF.pop()},{}],settings:[function(e,t,a){"use strict";cc._RF.push(t,"c1924YJ7UhNZZXjwLhrXOVm","settings"),cc.Class({extends:cc.Component,properties:{tips:{type:cc.Label,default:null}},onLoad:function(){cc.vv.tipsNum=0},joinQ:function(){this.tips.string="\u52a0\u5165qq\u7fa4\uff1a795582916\uff0c\u8054\u7cfb\u5ba2\u670d\u53ef\u5f97500\u94bb\u77f3\u793c\u5305"},goodComment:function(){this.tips.string="\u4e94\u661f\u597d\u8bc4\uff0c\u52a0\u5165qq\u7fa4\uff1a795582916\u5e76\u622a\u56fe\u7ed9\u5ba2\u670d\u4eba\u5458\uff0c\u9886\u4e94\u661f\u597d\u8bc4\u793c\u5305"},logOutGame:function(){var e=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));e.isLogin=!1,cc.sys.localStorage.setItem("jakiiAccountInfo",JSON.stringify(e)),cc.director.loadScene("login")},start:function(){}}),cc._RF.pop()},{}],trade:[function(e,t,a){"use strict";cc._RF.push(t,"8dbe7gEdhFPtpYB7tpXxNZn","trade"),cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab},onLoad:function(){cc.vv.tipsNum=0,this.reloadTransport()},addNewTransport:function(e,t){var a=this,c=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));if(t){if(cc.vv.userData.gemstone<1e3)return void cc.vv.message.showMessage("\u94bb\u77f3\u4e0d\u8db3\uff0c\u8bf7\u5145\u503c",1);for(var s=0,n=0;n<this.transportList.length;n++)this.transportList[n].isbuiedmoney&&s++;if(s>=5)return void cc.vv.message.showMessage("\u94bb\u77f3\u5546\u961f\u5df2\u8fbe\u5230\u6700\u5927\u5546\u961f\u6570\u91cf",1);if(this.operateFlag)return;this.operateFlag=!0,cc.vv.http.sendPostRequest("/addNewTransport",{account:c.account,money:!0}).then(function(e){200===(e=JSON.parse(e)).code?(cc.vv.message.showMessage("\u5f00\u901a\u6210\u529f",0),a.reloadTransport()):(cc.vv.message.showMessage(e.message,1),this.operateFlag=!1)},function(){cc.vv.message.showMessage("\u5f00\u901a\u5931\u8d25",1),this.operateFlag=!1})}else{for(var o=0,r=0;r<this.transportList.length;r++)this.transportList[r].isbuiedmoney||o++;if(parseInt(cc.vv.userData.level/10)+1<=o)return void cc.vv.message.showMessage("\u5f53\u524d\u5546\u961f\u5df2\u8fbe\u5230\u6700\u5927\u5546\u961f\u6570\u91cf",1);if(this.operateFlag)return;a.operateFlag=!0,cc.vv.http.sendPostRequest("/addNewTransport",{account:c.account}).then(function(e){200===(e=JSON.parse(e)).code?(cc.vv.message.showMessage("\u5f00\u901a\u6210\u529f",0),a.reloadTransport()):(cc.vv.message.showMessage(e.message,1),a.operateFlag=!1)},function(){cc.vv.message.showMessage("\u5f00\u901a\u5931\u8d25",1),a.operateFlag=!1})}},transport:function(){for(var e=[],t=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),a=0;a<this.node.children.length;a++)this.node.children[a].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked&&this.node.children[a].getChildByName("New Toggle").getComponent(cc.Toggle).interactable&&e.push(+this.node.children[a].id);if(e.length<=0)cc.vv.message.showMessage("\u8bf7\u9009\u62e9\u8981\u6d3e\u9063\u7684\u5546\u961f",1);else{var c={ids:e};e.length>1?cc.vv.message.showMessage("\u4e00\u6b21\u53ea\u80fd\u6d3e\u9063\u4e00\u4e2a\u5546\u961f",1):(cc.sys.localStorage.setItem(t.account+"transportInfo",JSON.stringify(c)),cc.vv.http.sendPostRequest("/createNewBusiness",{account:t.account,ids:c.ids}).then(function(e){cc.director.loadScene("trade")},function(){}))}},reloadTransport:function(){this.operateFlag=!1;var e=this,t=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));this.transportList=[],cc.vv.http.sendGetRequest("/getTransportList",{account:t.account}).then(function(a){for(var c=(a=JSON.parse(a)).data,s=e.node.children||[],n=0;n<s.length;n++)s[n].destroy();e.transportList=c||[];for(var o=0;o<c.length;++o){var r=cc.instantiate(e.itemPrefab),i=c[o];switch(i.class){case 1:i.classStr="\u9ed1\u94c1";break;case 2:i.classStr="\u9752\u94dc";break;case 3:i.classStr="\u9ec4\u91d1";break;case 4:i.classStr="\u94c2\u91d1";break;case 5:i.classStr="\u9ed1\u91d1";break;case 6:i.classStr="\u94bb\u77f3";break;case 7:i.classStr="\u9ed1\u94bb";break;case 8:i.classStr="\u738b\u8005"}e.node.addChild(r),r.id=i.id,r.getComponent("ItemTemplate").init({id:i.id,tradename:i.name,weight:parseInt(Math.pow(1.1,+i.level-1)*(i.baseweight+100*(+i.class-1))),tradeclass:i.classStr,tradelevel:"lv"+i.level,isBusy:i.isbusy,starttime:+i.starttime,totaltime:+i.totaltime,class:+i.class,level:+i.level,baseweight:i.baseweight},function(e){if("uplevel"===e.operate)if(e.data.level<20){var a=1e3*e.data.level+5e3*Math.pow(2,e.data.class-1);if(cc.vv.resourcedata.tiekuang<a||cc.vv.resourcedata.liangshi<a||cc.vv.resourcedata.caoyao<a||cc.vv.resourcedata.woods<a)return void cc.vv.message.showMessage("\u5347\u7ea7\u5546\u961f\u9700\u8981\u5404\u9879\u8d44\u6e90"+a+",\u8d44\u6e90\u4e0d\u8db3",1);cc.vv.http.sendPostRequest("/transportUplevel",{account:t.account,id:e.data.id,resourceAmount:a}).then(function(e){cc.director.loadScene("trade")},function(){})}else cc.vv.message.showMessage("\u5546\u961f\u7b49\u7ea7\u5df2\u8fbe\u6ee1\u7ea7\uff0c\u8bf7\u5347\u9636\u5546\u961f",1);if("upclass"===e.operate){if(e.data.level<20)return void cc.vv.message.showMessage("\u5347\u9636\u9700\u8981\u7b49\u7ea7\u5347\u523020\u6ee1\u7ea7",1);if(+e.data.class>=8)return void cc.vv.message.showMessage("\u60a8\u5df2\u5347\u5230\u6ee1\u9636",1);var c=0;if(e.data.class>=3&&(c=500),cc.vv.userData.gemstone<c)return void cc.vv.message.showMessage("\u5347\u9636\u9700\u8981\u94bb\u77f3"+c+"\uff0c\u8bf7\u5145\u503c",1);cc.vv.http.sendPostRequest("/updateGemstone",{account:t.account,gemstone:+cc.vv.userData.gemstone-c}).then(function(a){cc.vv.userData.gemstone=+cc.vv.userData.gemstone-c,cc.vv.http.sendPostRequest("/transportUpclass",{account:t.account,id:e.data.id}).then(function(e){cc.director.loadScene("trade")})})}})}},function(){})}}),cc._RF.pop()},{}],viewSelf:[function(e,t,a){"use strict";cc._RF.push(t,"826165vwpFAda+73OwoiDm0","viewSelf"),cc.Class({extends:cc.Component,properties:{equipment:{type:cc.Node,default:null},property:{type:cc.Node,default:null},lianqifang:{type:cc.Node,default:null},myLevel:{type:cc.Label,default:null},myBattle:{type:cc.Label,default:null},strongStoneClip:{type:cc.Label,default:null}},changeTab:function(e,t){"equipment"===t&&(this.equipment.active=!0,this.property.active=!1,this.lianqifang.active=!1),"property"===t&&(this.equipment.active=!1,this.property.active=!0,this.lianqifang.active=!1),"lianqifang"===t&&(this.equipment.active=!1,this.property.active=!1,this.lianqifang.active=!0);var a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));this.reloadPage(a)},onLoad:function(){cc.vv.tipsNum=0;var e=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));this.operateFlag=!1,this.getPropertyUserInfo(),this.reloadPage(e),this.myLevel.string=this.dealLevel(cc.vv.userData.level)},upLevel:function(e,t){var a=this,c=+t,s=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));a.operateFlag||(a.operateFlag=!0,cc.vv.http.sendPostRequest("/upLevelEquipment",{account:s.account,type:c}).then(function(e){200===(e=JSON.parse(e)).code?(cc.vv.message.showMessage("\u5347\u7ea7\u6210\u529f",0),a.reloadPage(s)):cc.vv.message.showMessage(e.message,1),a.operateFlag=!1},function(){cc.vv.message.showMessage("\u5347\u7ea7\u5931\u8d25",1),a.operateFlag=!1}))},upClass:function(e,t){var a=this,c=+t,s=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo"));a.operateFlag||(a.operateFlag=!0,cc.vv.http.sendPostRequest("/upClassEquipment",{account:s.account,type:c}).then(function(e){a.operateFlag=!1,200!==(e=JSON.parse(e)).code?(cc.vv.message.showMessage(e.message,1),a.operateFlag=!1):(cc.vv.message.showMessage("\u5347\u9636\u6210\u529f",0),a.reloadPage(s),a.operateFlag=!1)},function(){cc.vv.message.showMessage("\u5347\u9636\u5931\u8d25",1),a.operateFlag=!1}))},reloadPage:function(e){if(this.operateFlag=!1,this.equipment.active){var t=this.equipment.getChildren()[0].getChildren()[1].getChildren()[0].getChildren();cc.vv.http.sendGetRequest("/getEquipmentList",{account:e.account}).then(function(e){for(var a=(e=JSON.parse(e)).data||[],c=0;c<a.length;c++){var s={1:"\u9ed1\u94c1",2:"\u9752\u94dc",3:"\u767d\u94f6",4:"\u9ec4\u91d1",5:"\u94c2\u91d1",6:"\u7d2b\u91d1",7:"\u94bb\u77f3",8:"\u9ed1\u94bb",9:"\u738b\u8005",10:"\u4f20\u5947"};switch(a[c].type){case 1:t[0].getChildren()[1].getComponent("cc.Label").string=(s[a[c].class]||"\u81f3\u5c0a")+" - \u5251",t[0].getChildren()[2].getComponent("cc.Label").string="(+"+a[c].level+")",t[0].getChildren()[4].getComponent("cc.Label").string=+a[c].strength+ +a[c].level+10*+a[c].class;break;case 2:t[1].getChildren()[1].getComponent("cc.Label").string=(s[a[c].class]||"\u81f3\u5c0a")+" - \u8863",t[1].getChildren()[2].getComponent("cc.Label").string="(+"+a[c].level+")",t[1].getChildren()[4].getComponent("cc.Label").string=+a[c].gengu+ +a[c].level+10*+a[c].class;break;case 3:t[2].getChildren()[1].getComponent("cc.Label").string=(s[a[c].class]||"\u81f3\u5c0a")+" - \u76d4",t[2].getChildren()[2].getComponent("cc.Label").string="(+"+a[c].level+")",t[2].getChildren()[4].getComponent("cc.Label").string=+a[c].tizhi+ +a[c].level+10*+a[c].class;break;case 4:t[3].getChildren()[1].getComponent("cc.Label").string=(s[a[c].class]||"\u81f3\u5c0a")+" - \u978b",t[3].getChildren()[2].getComponent("cc.Label").string="(+"+a[c].level+")",t[3].getChildren()[4].getComponent("cc.Label").string=+a[c].speed+ +a[c].level+10*+a[c].class;break;case 5:t[4].getChildren()[1].getComponent("cc.Label").string=(s[a[c].class]||"\u81f3\u5c0a")+" - \u6212",t[4].getChildren()[2].getComponent("cc.Label").string="(+"+a[c].level+")",t[4].getChildren()[4].getComponent("cc.Label").string=+a[c].baoji+ +a[c].level+10*+a[c].class}}},function(){cc.vv.message.showMessage("\u67e5\u8be2\u6cd5\u5b9d\u5931\u8d25",1)})}if(this.property.active){var a=this.property.getChildren();cc.vv.http.sendGetRequest("/getUserPropertyInfo",{account:e.account}).then(function(e){200===(e=JSON.parse(e)).code?(a[0].getChildren()[0].getComponent("cc.Label").string=5*e.data.strength,a[1].getChildren()[0].getComponent("cc.Label").string=5*e.data.gengu,a[2].getChildren()[0].getComponent("cc.Label").string=10*e.data.tizhi,a[3].getChildren()[0].getComponent("cc.Label").string=2*e.data.speed,a[4].getChildren()[0].getComponent("cc.Label").string=2*e.data.baoji):cc.vv.message.showMessage("\u67e5\u8be2\u5c5e\u6027\u5931\u8d25",1)},function(){cc.vv.message.showMessage("\u67e5\u8be2\u5c5e\u6027\u5931\u8d25",1)})}this.lianqifang.active&&(this.strongStoneClip.string=cc.vv.userData.strongstoneclip)},dealLevel:function(e){var t="";switch(parseInt(e/10)+1){case 1:t="\u51e1\u4eba\u5883";break;case 2:t="\u661f\u8fb0\u5883";break;case 3:t="\u8d85\u51e1\u5883";break;case 4:t="\u795e\u7075\u5883";break;case 5:t="\u754c\u795e\u5883";break;case 6:t="\u771f\u795e\u5883";break;case 7:t="\u865a\u7a7a\u5883";break;case 8:t="\u5408\u4e00\u5883";break;case 9:t="\u6df7\u6c8c\u5883";break;case 10:t="\u6d51\u6e90\u5883";break;case 11:t="\u5723\u4eba\u5883";break;case 12:t="\u8d85\u5723\u5883";break;case 13:t="\u6d51\u6e90\u751f\u547d";break;default:t="\u51e1\u4eba\u5883"}switch(e%10){case 0:t+="\u5341\u9636";break;case 1:t+="\u4e00\u9636";break;case 2:t+="\u4e8c\u9636";break;case 3:t+="\u4e09\u9636";break;case 4:t+="\u56db\u9636";break;case 5:t+="\u4e94\u9636";break;case 6:t+="\u516d\u9636";break;case 7:t+="\u4e03\u9636";break;case 8:t+="\u516b\u9636";break;case 9:t+="\u4e5d\u9636"}return t},getPropertyUserInfo:function(){var e=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),t=this;cc.vv.http.sendGetRequest("/getUserPropertyInfo",{account:e.account}).then(function(e){if(200===(e=JSON.parse(e)).code){var a=5*e.data.strength+5*e.data.gengu+10*e.data.tizhi+2*e.data.speed+2*e.data.baoji;t.myBattle.string="\u6218\u529b: "+a}else cc.vv.message.showMessage("\u67e5\u8be2\u5c5e\u6027\u5931\u8d25",1)},function(){cc.vv.message.showMessage("\u67e5\u8be2\u5c5e\u6027\u5931\u8d25",1)})},createThings:function(e,t){var a=JSON.parse(cc.sys.localStorage.getItem("jakiiAccountInfo")),c=this;c.operateFlag||(c.operateFlag=!0,cc.vv.http.sendPostRequest("/createLianqifang",{account:a.account,type:+t}).then(function(e){200===(e=JSON.parse(e)).code?(c.operateFlag=!1,cc.vv.message.showMessage(e.message,0),c.reloadPage(a)):(cc.vv.message.showMessage(e.message,1),c.operateFlag=!1)},function(){cc.vv.message.showMessage("\u5408\u6210\u5931\u8d25",1),c.operateFlag=!1}))},start:function(){}}),cc._RF.pop()},{}],welcome:[function(e,t,a){"use strict";cc._RF.push(t,"5d9c4HEH39FgZAN836tcgEA","welcome"),cc.Class({extends:cc.Component,properties:{welcomeTip:{default:null,type:cc.Label},startButton:{default:null,type:cc.Button}},onLoad:function(){this.welcomeTip.node.opacity=0,this.startButton.node.active=!1},update:function(e){this.welcomeTip.node.opacity<255?this.welcomeTip.node.opacity=this.welcomeTip.node.opacity+40*e:this.startButton.node.active=!0},goToCity:function(){cc.director.loadScene("city")}}),cc._RF.pop()},{}]},{},["activity","bag","battle","battleLevelSelect","bottom2","city","cityBottom","goTowar","market","rank","resource","settings","trade","viewSelf","ItemRankTemplate","ItemTemplate","messageTip","initParams","loading","progress","loginGame","welcome","HTTP"]);